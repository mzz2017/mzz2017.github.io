
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
  
    <title>numpy手册 | mzz&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="莫之章">
    

    
    <meta name="description" content="引言：自从发现numpy中的==不返回boolean之后，我觉得学这玩意不能这么简单了。">
<meta name="keywords" content="data-science">
<meta property="og:type" content="article">
<meta property="og:title" content="numpy手册">
<meta property="og:url" content="http://mzz.pub/2019/12/06/数据挖掘/numpy/index.html">
<meta property="og:site_name" content="mzz&#39;s blog">
<meta property="og:description" content="引言：自从发现numpy中的==不返回boolean之后，我觉得学这玩意不能这么简单了。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-21T07:37:12.713Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="numpy手册">
<meta name="twitter:description" content="引言：自从发现numpy中的==不返回boolean之后，我觉得学这玩意不能这么简单了。">

    
    
    <link rel="icon" href="/img/f.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
	
	

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<script src="/js/inspage.js" type="module"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style><!-- hexo-inject:begin --><link rel='stylesheet' href='custom_css_source'><!-- hexo-inject:end -->
</head>

</html>
  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="mzz&#39;s blog">mzz&#39;s blog</a></h1>
				<h2 class="blog-motto">　　　　　虽千万人，  吾往矣</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="https://v2raya.mzz.pub">V2RayA</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索">
						<input type="hidden" name="q" value="site:mzz.pub">
					</form>
					
					</li>
				</ul>
			</ul></nav>			
			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/12/06/数据挖掘/numpy/" title="numpy手册" itemprop="url">numpy手册</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="莫之章" target="_blank" itemprop="author">莫之章</a>
		
  </p><p class="article-time">
    <time datetime="2019-12-06T07:00:00.000Z" itemprop="datePublished"> 发表于 2019-12-06</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#numpy"><span class="toc-number">1.</span> <span class="toc-text"> numpy</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数与操作符"><span class="toc-number">1.1.</span> <span class="toc-text"> 函数与操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#"><span class="toc-number">1.1.1.</span> <span class="toc-text"> ==、&gt;、&lt;、&gt;=、&lt;=</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-2"><span class="toc-number">1.1.2.</span> <span class="toc-text"> []</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-"><span class="toc-number">1.1.3.</span> <span class="toc-text"> -/+</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in"><span class="toc-number">1.1.4.</span> <span class="toc-text"> in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-3"><span class="toc-number">1.1.5.</span> <span class="toc-text"> @</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-4"><span class="toc-number">1.1.6.</span> <span class="toc-text"> &amp;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repeat"><span class="toc-number">1.1.7.</span> <span class="toc-text"> repeat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ravel"><span class="toc-number">1.1.8.</span> <span class="toc-text"> ravel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nonzero"><span class="toc-number">1.1.9.</span> <span class="toc-text"> nonzero</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flatnonzero"><span class="toc-number">1.1.10.</span> <span class="toc-text"> flatnonzero</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#randomseed"><span class="toc-number">1.1.11.</span> <span class="toc-text"> random.seed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#randomchoice"><span class="toc-number">1.1.12.</span> <span class="toc-text"> random.choice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#astype"><span class="toc-number">1.1.13.</span> <span class="toc-text"> astype</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reshape"><span class="toc-number">1.1.14.</span> <span class="toc-text"> reshape</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resize"><span class="toc-number">1.1.15.</span> <span class="toc-text"> resize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#argsort"><span class="toc-number">1.1.16.</span> <span class="toc-text"> argsort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asarray"><span class="toc-number">1.1.17.</span> <span class="toc-text"> asarray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where"><span class="toc-number">1.1.18.</span> <span class="toc-text"> where</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log1p"><span class="toc-number">1.1.19.</span> <span class="toc-text"> log1p</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arange"><span class="toc-number">1.1.20.</span> <span class="toc-text"> arange</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logical_and"><span class="toc-number">1.1.21.</span> <span class="toc-text"> logical_and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#corrcoef"><span class="toc-number">1.1.22.</span> <span class="toc-text"> corrcoef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#percentile"><span class="toc-number">1.1.23.</span> <span class="toc-text"> percentile</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用方法"><span class="toc-number">1.2.</span> <span class="toc-text"> 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#求众数"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 求众数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python"><span class="toc-number">2.</span> <span class="toc-text"> python</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#常见用法"><span class="toc-number">2.1.</span> <span class="toc-text"> 常见用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#listrangen"><span class="toc-number">2.1.1.</span> <span class="toc-text"> list(range(n))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#listzip"><span class="toc-number">2.1.2.</span> <span class="toc-text"> list(zip(…))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dictzip"><span class="toc-number">2.1.3.</span> <span class="toc-text"> dict(zip([…],[…]))</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#matplotlibpyplot"><span class="toc-number">3.</span> <span class="toc-text"> matplotlib.pyplot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数与操作符-2"><span class="toc-number">3.1.</span> <span class="toc-text"> 函数与操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#subplot"><span class="toc-number">3.1.1.</span> <span class="toc-text"> subplot</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pandas"><span class="toc-number">4.</span> <span class="toc-text"> pandas</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#dataframe"><span class="toc-number">4.1.</span> <span class="toc-text"> DataFrame</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#drop"><span class="toc-number">4.1.1.</span> <span class="toc-text"> drop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#series"><span class="toc-number">4.2.</span> <span class="toc-text"> Series</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#loc-iloc"><span class="toc-number">4.2.1.</span> <span class="toc-text"> loc / iloc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#value_counts"><span class="toc-number">4.2.2.</span> <span class="toc-text"> value_counts</span></a></li></ol></li></ol></li></ol>
		
		</div>
		
		<p>引言：自从发现numpy中的<code>==</code>不返回boolean之后，我觉得学这玩意不能这么简单了。</p>
<hr>
<a id="more"></a>
<h1 id="numpy"><a class="markdownIt-Anchor" href="#numpy"></a> numpy</h1>
<p>这东西真的很像MATLAB，不是吗。显然它重载了各种运算符。</p>
<p>后来才发现numpy的前身是numeric，它确实是一个专门仿MATLAB的库。<a href="https://mp.weixin.qq.com/s/0lpsJgZkuFMOu-fsrGeY3Q" target="_blank" rel="noopener">码农翻身</a></p>
<p>下面的内容对熟悉面向对象编程的程序员比较友好。</p>
<h2 id="函数与操作符"><a class="markdownIt-Anchor" href="#函数与操作符"></a> 函数与操作符</h2>
<p>下面只介绍简单常用用法。</p>
<h3 id><a class="markdownIt-Anchor" href="#"></a> ==、&gt;、&lt;、&gt;=、&lt;=</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Visualize some examples from the dataset.</span></span><br><span class="line"><span class="comment"># We show a few examples of training images from each class.</span></span><br><span class="line">classes = [<span class="string">'plane'</span>, <span class="string">'car'</span>, <span class="string">'bird'</span>, <span class="string">'cat'</span>, <span class="string">'deer'</span>, <span class="string">'dog'</span>, <span class="string">'frog'</span>, <span class="string">'horse'</span>, <span class="string">'ship'</span>, <span class="string">'truck'</span>]</span><br><span class="line">num_classes = len(classes)</span><br><span class="line">samples_per_class = <span class="number">7</span></span><br><span class="line"><span class="keyword">for</span> y, cls <span class="keyword">in</span> enumerate(classes):</span><br><span class="line">    result=y_train == y <span class="comment"># 解释：y_train&#123;ndarray&#125;[6 9 9 4 1 1 2 7...]</span></span><br><span class="line">    print(type(result),result)<span class="comment"># 结果：&lt;class 'numpy.ndarray'&gt; [False False False ... False False False]</span></span><br><span class="line">    idxs = np.flatnonzero(y_train == y)<span class="comment">#由于y_train是个一维的，这里也可以写成np.nonzero(y_train==y)[0]，见手册flatnonzero</span></span><br><span class="line">    idxs = np.random.choice(idxs, samples_per_class, replace=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> i, idx <span class="keyword">in</span> enumerate(idxs):</span><br><span class="line">        plt_idx = i * num_classes + y + <span class="number">1</span></span><br><span class="line">        plt.subplot(samples_per_class, num_classes, plt_idx)</span><br><span class="line">        plt.imshow(X_train[idx].astype(<span class="string">'uint8'</span>))</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            plt.title(cls)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>可以看到ndarray==val后，返回一个相同大小的ndarray，其中所有和val相等的单元变为True，否则变为False。</p>
<p>注：ndarray即多维array，通常使用np.array即可以创建，只是一种类名和叫法。</p>
<p>大于号、小于号、大于等于、小于等于也同理。</p>
<h3 id="-2"><a class="markdownIt-Anchor" href="#-2"></a> []</h3>
<p>np.ndarray的方括号操作符可以传入列表，如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[[<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]]</span><br><span class="line">array([<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<p>也可以使用类似matlab的语法，多维切片：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[:,<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">array([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">9</span>, <span class="number">10</span>]])</span><br></pre></td></tr></table></figure>
<p>解释：第一维全选，第二维选择下标[1, 3)</p>
<h3 id="-"><a class="markdownIt-Anchor" href="#-"></a> -/+</h3>
<p>np.ndarray不仅可以对同维数组进行加减，还可以对维度相差1的数组进行加减。</p>
<p>当维度相差1时，返回的是一个和较高维数组shape相同的数组。</p>
<p><strong>看例子</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array(list(range(<span class="number">12</span>))).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array(list(range(<span class="number">6</span>,<span class="number">10</span>))).reshape(<span class="number">4</span>)</span><br><span class="line">array([<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a-b</span><br><span class="line">array([[<span class="number">-6</span>, <span class="number">-6</span>, <span class="number">-6</span>, <span class="number">-6</span>],</span><br><span class="line">       [<span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b-a</span><br><span class="line">array([[ <span class="number">6</span>,  <span class="number">6</span>,  <span class="number">6</span>,  <span class="number">6</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>,  <span class="number">2</span>],</span><br><span class="line">       [<span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a+b</span><br><span class="line">array([[ <span class="number">6</span>,  <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b+a</span><br><span class="line">array([[ <span class="number">6</span>,  <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>],</span><br><span class="line">       [<span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>],</span><br><span class="line">       [<span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>]])</span><br></pre></td></tr></table></figure>
<p><strong>特例：</strong></p>
<p>当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">×</span><span class="mord mathit">n</span></span></span></span>且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m\times1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mbin">×</span><span class="mord mathrm">1</span></span></span></span>时</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[<span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.shape,b.shape)</span><br><span class="line">(<span class="number">1</span>, <span class="number">12</span>) (<span class="number">7</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a+b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a-b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [<span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [<span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">-6</span>, <span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b-a</span><br><span class="line">array([[  <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>,  <span class="number">-7</span>,  <span class="number">-8</span>,  <span class="number">-9</span>, <span class="number">-10</span>, <span class="number">-11</span>],</span><br><span class="line">       [  <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>,  <span class="number">-7</span>,  <span class="number">-8</span>,  <span class="number">-9</span>, <span class="number">-10</span>],</span><br><span class="line">       [  <span class="number">2</span>,   <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>,  <span class="number">-7</span>,  <span class="number">-8</span>,  <span class="number">-9</span>],</span><br><span class="line">       [  <span class="number">3</span>,   <span class="number">2</span>,   <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>,  <span class="number">-7</span>,  <span class="number">-8</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">3</span>,   <span class="number">2</span>,   <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>,  <span class="number">-7</span>],</span><br><span class="line">       [  <span class="number">5</span>,   <span class="number">4</span>,   <span class="number">3</span>,   <span class="number">2</span>,   <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>,  <span class="number">-6</span>],</span><br><span class="line">       [  <span class="number">6</span>,   <span class="number">5</span>,   <span class="number">4</span>,   <span class="number">3</span>,   <span class="number">2</span>,   <span class="number">1</span>,   <span class="number">0</span>,  <span class="number">-1</span>,  <span class="number">-2</span>,  <span class="number">-3</span>,  <span class="number">-4</span>,  <span class="number">-5</span>]])</span><br></pre></td></tr></table></figure>
<p>可以看出无论谁作被减数、减数、加数、被加数，得到的都是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>7</mn><mo>×</mo><mn>1</mn><mn>2</mn></mrow><annotation encoding="application/x-tex">7\times12</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">7</span><span class="mbin">×</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span></span></span></span> 的矩阵。</p>
<p>且可以很容易推断出来，运算规则是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.repeat(<span class="number">7</span>,axis=<span class="number">0</span>).shape</span><br><span class="line">(<span class="number">7</span>, <span class="number">12</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.repeat(<span class="number">7</span>,axis=<span class="number">0</span>)+b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.repeat(<span class="number">7</span>,axis=<span class="number">0</span>)-b</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [<span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [<span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">-6</span>, <span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]])</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.repeat(<span class="number">12</span>,axis=<span class="number">1</span>).shape</span><br><span class="line">(<span class="number">7</span>, <span class="number">12</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a+b.repeat(<span class="number">12</span>,axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>],</span><br><span class="line">       [ <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>],</span><br><span class="line">       [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>],</span><br><span class="line">       [ <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>],</span><br><span class="line">       [ <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a-b.repeat(<span class="number">12</span>,axis=<span class="number">1</span>)</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>],</span><br><span class="line">       [<span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">       [<span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>],</span><br><span class="line">       [<span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">       [<span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [<span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">       [<span class="number">-6</span>, <span class="number">-5</span>, <span class="number">-4</span>, <span class="number">-3</span>, <span class="number">-2</span>, <span class="number">-1</span>,  <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>]])</span><br></pre></td></tr></table></figure>
<p>意义：如果你有向量<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mrow><mi>n</mi><mo>×</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">a_{n\times 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mbin">×</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mrow><mi>m</mi><mo>×</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">b_{m\times 1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">×</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>，你想得到a、b任意两个维度加减的结果，就可以使用<code>c = a - b.T</code>得到。</p>
<p>那么<code>c[i][j]</code>即a的第i维与b的第j维的差。</p>
<p>相当于</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><msub><mi>b</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">c_{ij}=a_i-b_j
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></span></p>
<p>求和同理。</p>
<p>观察可知，应用条件为：</p>
<ol>
<li>c是个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n\times m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mbin">×</span><span class="mord mathit">m</span></span></span></span>的矩阵，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>∈</mo><mi>n</mi><mo separator="true">,</mo><mi>j</mi><mo>∈</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">i\in n,j\in m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">∈</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">∈</span><span class="mord mathit">m</span></span></span></span></li>
<li>a是一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n\times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span><span class="mbin">×</span><span class="mord mathrm">1</span></span></span></span>的矩阵，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>是一个数值</li>
<li>b是一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m\times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mbin">×</span><span class="mord mathrm">1</span></span></span></span>的矩阵，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">b_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>是一个数值</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>相关，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span></span></span></span>是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span>相关，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">c_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">b_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>的简单加减法得到</li>
</ol>
<p><strong>特例实操：</strong></p>
<p>需要实现</p>
<p>a.shape=(500, 3072)</p>
<p>b.shape=(5000, 3072)</p>
<p><code>c = [np.sqrt(np.sum(np.square(a[i] - b), axis=1)) for i in range(a.shape[0])]</code></p>
<p>c.shape=(500, 5000)</p>
<p>即实现</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msqrt><mrow><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><msub><mi>b</mi><mi>j</mi></msub><msup><mo>)</mo><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">c_{ij}=\sqrt{\sum_{\text{axis}}(a_i-b_j)^2}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.5171389999999998em;"></span><span class="strut bottom" style="height:3.04003em;vertical-align:-1.5228910000000002em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="sqrt mord"><span class="sqrt-sign" style="top:0.27286100000000024em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size4">√</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord displaystyle textstyle cramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.183507em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span style="top:-0.000004999999999921734em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span style="top:-1.4371389999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span></span></p>
<p>求c矩阵。</p>
<p>注意，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">b_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>都是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>×</mo><mn>3</mn><mn>0</mn><mn>7</mn><mn>2</mn></mrow><annotation encoding="application/x-tex">1\times 3072</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">×</span><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathrm">7</span><span class="mord mathrm">2</span></span></span></span>的矩阵。</p>
<p>思想：</p>
<p>由于square、sqrt都是对每个单元进行的，不影响矩阵大小，所以我们可以利用numpy的加法规则绕过最外层的sqrt，即先加后sqrt和先sqrt后加是一样的。</p>
<p>为了利用加法规则，我们改写成</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msqrt><mrow><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msubsup><mi>a</mi><mi>i</mi><mn>2</mn></msubsup><mo>−</mo><mn>2</mn><msub><mi>a</mi><mi>i</mi></msub><msubsup><mi>b</mi><mi>j</mi><mi>T</mi></msubsup><mo>+</mo><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msubsup><mi>b</mi><mi>j</mi><mn>2</mn></msubsup></mrow></msqrt></mrow><annotation encoding="application/x-tex">c_{ij}=\sqrt{\sum_{\text{axis}}a_i^2-2a_ib_j^T+\sum_{\text{axis}}b_j^2}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.5171389999999998em;"></span><span class="strut bottom" style="height:3.04003em;vertical-align:-1.5228910000000002em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">c</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="sqrt mord"><span class="sqrt-sign" style="top:0.27286100000000024em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size4">√</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord displaystyle textstyle cramped"><span class="mop op-limits"><span class="vlist"><span style="top:1.183507em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span style="top:-0.000004999999999921734em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.27686399999999994em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.34480000000000005em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.2768639999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.3448em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mop op-limits"><span class="vlist"><span style="top:1.183507em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span style="top:-0.000004999999999921734em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span><span class="op-symbol large-op mop">∑</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.2768639999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.3448em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span style="top:-1.4371389999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span></span></p>
<p>之前说了，其中sqrt可以提到外面去，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>C</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msubsup><mi>a</mi><mi>i</mi><mn>2</mn></msubsup><mo>−</mo><mn>2</mn><msub><mi>a</mi><mi>i</mi></msub><msubsup><mi>b</mi><mi>j</mi><mi>T</mi></msubsup><mo>+</mo><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msubsup><mi>b</mi><mi>j</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">C_{ij}=\sum_{\text{axis}}a_i^2-2a_ib_j^T+\sum_{\text{axis}}b_j^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.236103em;vertical-align:-0.394772em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>，算完之后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo>=</mo><msqrt><mrow><mi>C</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">c=\sqrt{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9266650000000001em;"></span><span class="strut bottom" style="height:1.04em;vertical-align:-0.11333500000000002em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span><span class="mrel">=</span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.08666499999999999em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span><span style="top:-0.846665em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span> 。</p>
<p>看到了，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><msubsup><mi>b</mi><mi>j</mi><mi>T</mi></msubsup></mrow><annotation encoding="application/x-tex">a_ib_j^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.236103em;vertical-align:-0.394772em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>很好做，直接矩阵乘法。将选择运算符<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>外提，记<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msup><mi>a</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sum_{\text{axis}} a^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.114118em;vertical-align:-0.30001em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∑</mo><mrow><mtext><mi mathvariant="normal">a</mi><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi></mtext></mrow></msub><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sum_{\text{axis}}b^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.114118em;vertical-align:-0.30001em;"></span><span class="base textstyle uncramped"><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">∑</span><span class="vlist"><span style="top:0.30001em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="text mord scriptstyle cramped"><span class="mord mathrm">a</span><span class="mord mathrm">x</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span>，则<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">c</span></span></span></span>可由<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span>的numpy加法得到。为什么选择某行、某列的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>可以外提呢，因为先选择、后平方、求和，以及先平方、求和，后选择，结果是一样的。</p>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.shape, b.shape)</span><br><span class="line">(<span class="number">500</span>, <span class="number">3072</span>) (<span class="number">5000</span>, <span class="number">3072</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A = np.sum(a ** <span class="number">2</span>, axis=<span class="number">1</span>).reshape(<span class="number">500</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = np.sum(b ** <span class="number">2</span>, axis=<span class="number">1</span>).reshape(<span class="number">1</span>, <span class="number">5000</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>C = A + B - <span class="number">2</span> * (a @ b.T) <span class="comment"># 相同大小矩阵加减</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = np.sqrt(C)</span><br></pre></td></tr></table></figure>
<p>我们做了很多变形，但结果一定是值得的，下面是性能比较：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Original version took <span class="number">34.032109</span> seconds</span><br><span class="line">Pure numpy version took <span class="number">0.209084</span> seconds</span><br></pre></td></tr></table></figure>
<h3 id="in"><a class="markdownIt-Anchor" href="#in"></a> in</h3>
<p>对ndarray使用in时，我们不会得到index，而是得到子数组</p>
<p>如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[i <span class="keyword">for</span> i <span class="keyword">in</span> a]</span><br><span class="line">[array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]), array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]), array([ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])]</span><br></pre></td></tr></table></figure>
<p>那么如何获得index呢？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">array([[ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>],</span><br><span class="line">       [ <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>],</span><br><span class="line">       [ <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[i <span class="keyword">for</span> i <span class="keyword">in</span> range(a.shape[<span class="number">0</span>])]</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[i <span class="keyword">for</span> i, _ <span class="keyword">in</span> enumerate(a)] <span class="comment"># 不能写作 i in enumerate(a), i会得到一个列表，包含index和value</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<h3 id="-3"><a class="markdownIt-Anchor" href="#-3"></a> @</h3>
<p>矩阵乘法matmul可以用@来代替</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>]])</span><br><span class="line">b = np.array([[<span class="number">4</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.matmul(a, b)</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a @ b</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="-4"><a class="markdownIt-Anchor" href="#-4"></a> &amp;</h3>
<p>ndarray之间的“逻辑运算”只能用&amp;代替，该运算符即“按位与”运算，该运算符的优先级较低，与比较运算符一起用时需要打括号。按位与定义，True与True为True，True与False为False，False与False为False。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array(tuple(range(<span class="number">9</span>))).reshape((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.array(list(range(<span class="number">9</span>,<span class="number">0</span>,<span class="number">-1</span>))).reshape([<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line">array([[<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a&gt;=<span class="number">3</span>)&amp;(b&gt;=<span class="number">3</span>)</span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a&amp;b</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure>
<h3 id="repeat"><a class="markdownIt-Anchor" href="#repeat"></a> repeat</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">array([[<span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.shape</span><br><span class="line">(<span class="number">7</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=b.repeat(<span class="number">10</span>,axis=<span class="number">1</span>)</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.shape</span><br><span class="line">(<span class="number">7</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>如果你想使用这种用法，参数axis不可省。</p>
<h3 id="ravel"><a class="markdownIt-Anchor" href="#ravel"></a> ravel</h3>
<blockquote>
<p>动词：使纠缠; 使更复杂; 使更纷乱;</p>
<p>名词：纠结之物，拆开部分</p>
<p>拉夫</p>
</blockquote>
<p>将ndarray展开，类似于es6和golang中的<code>...</code>运算符。</p>
<p>别看英文示意好像很可怕，实际上我觉得它就是一个展开运算符，多少维的数组都能给你压平。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">np.resize(np.ones(<span class="number">3</span>,dtype=np.int),[<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">array([[[1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1]],</span></span><br><span class="line"><span class="string">       [[1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1]],</span></span><br><span class="line"><span class="string">       [[1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1],</span></span><br><span class="line"><span class="string">        [1, 1, 1]]])</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">np.ravel(a)</span><br><span class="line"><span class="comment"># array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1])</span></span><br></pre></td></tr></table></figure>
<h3 id="nonzero"><a class="markdownIt-Anchor" href="#nonzero"></a> nonzero</h3>
<p>总是返回一个二维数组，通过特殊用法可以列出原数组所有非0元素的下标。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Examples</span><br><span class="line">--------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = np.array([[<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">array([[<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">4</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">5</span>, <span class="number">6</span>, <span class="number">0</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.nonzero(x)</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]), </span><br><span class="line"> array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
<p>再来个例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line">       [[<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]],</span><br><span class="line">       [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.nonzero() <span class="comment"># 用法同np.nonzero(a)</span></span><br><span class="line">(array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]),</span><br><span class="line"> array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]),</span><br><span class="line"> array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))</span><br></pre></td></tr></table></figure>
<p>解释：可以看到返回的结果，第一列就是一个坐标，第二列也是一个坐标，以此类推。</p>
<p>用法：假设有<code>b=np.nonzero(x)</code></p>
<p>则b这个二维数组意为<code>b[dimension][rank]</code></p>
<p>假设x是一个三维数组：</p>
<p><code>np.nonzero(x)[0][0]</code>即第0个非零值的第0维坐标</p>
<p><code>np.nonzero(x)[1][0]</code>即第0个非零值的第1维坐标</p>
<p><code>np.nonzero(x)[2][0]</code>即第0个非零值的第2维坐标</p>
<p>那么如何重新访问这个第0个非0值呢？</p>
<p><code>x[np.nonzero(x)[0][0]][np.nonzero(x)[1][0]][np.nonzero(x)[2][0]]</code></p>
<p>本例中重复调用了np.nonzero()这个函数，实际上可以保存调用结果，无需多次调用。</p>
<h3 id="flatnonzero"><a class="markdownIt-Anchor" href="#flatnonzero"></a> flatnonzero</h3>
<p><code>np.flatnonzero(a)</code>即<code>np.nonzero(np.ravel(a))[0]</code></p>
<p>显然由于nonzero返回一个二维数组，而np.ravel返回一个一维数组，那么总是写[0]就显得蠢蠢的，flatnonzero就应运而生了。</p>
<p>一些骚操作比方说：<code>np.flatnonzero(y_train == y)</code></p>
<p>其中y_train是一个一维数组，y是个值，见手册==一节。</p>
<p>则可找到所有y_train中所有等于y的值的下标。</p>
<p>这里还可以写成<code>np.nonzero(y_train == y)[0]</code>，因为不需要ravel。</p>
<p>这个用法很像js中的<code>y_train.filter((v,i)=&gt;v==y&amp;&amp;i)</code>，或python中的<code>[i for i,v in enumerate(y_train) if v==y]</code>。</p>
<p>至于为什么要喜欢在一位数组上用一个flatnonzero方法，因为numpy是一个类MATLAB的新语言啊（笑）。</p>
<h3 id="randomseed"><a class="markdownIt-Anchor" href="#randomseed"></a> random.seed</h3>
<blockquote>
<p>Random seed used to initialize the pseudo-random number generator. Can be any integer between 0 and 2**32 - 1 inclusive, an array (or other sequence) of such integers, or <code>None</code> (the default). If <a href="https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.random.seed.html#numpy.random.seed" target="_blank" rel="noopener"><code>seed</code></a> is <code>None</code>, then <a href="https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.random.RandomState.html#numpy.random.RandomState" target="_blank" rel="noopener"><code>RandomState</code></a> will try to read data from <code>/dev/urandom</code> (or the Windows analogue) if available or seed from the clock otherwise.</p>
</blockquote>
<p>常常在random.choice之前用。</p>
<p>如果设定一个固定的值，常用于想使得每次运行时随机的结果一致。</p>
<h3 id="randomchoice"><a class="markdownIt-Anchor" href="#randomchoice"></a> random.choice</h3>
<blockquote>
<p>choice(a, size=None, replace=True, p=None)</p>
<p>def choice(a: Any,<br>
size: Union[int, Iterable, tuple[int], None] = None,<br>
replace: Optional[bool] = True,<br>
p: Any = None) -&gt; Any</p>
<p>Generates a random sample from a given 1-D array</p>
<p>a : 1-D array-like or int<br>
If an ndarray, a random sample is generated from its elements. If an int, the random sample is generated as if a were np.arange(a)<br>
size : int or tuple of ints, optional<br>
Output shape. If the given shape is, e.g., (m, n, k), then m * n * k samples are drawn. Default is None, in which case a single value is returned.<br>
replace : boolean, optional<br>
Whether the sample is with or without replacement<br>
p : 1-D array-like, optional<br>
The probabilities associated with each entry in a. If not given the sample assumes a uniform distribution over all entries in a.<br>
samples : single item or ndarray<br>
The generated random samples<br>
ValueError<br>
If a is an int and less than zero, if a or p are not 1-dimensional, if a is an array-like of size 0, if p is not a vector of probabilities, if a and p have different lengths, or if replace=False and the sample size is greater than the population size</p>
</blockquote>
<p>解释：</p>
<p><strong>a</strong></p>
<p>a就是一个样本(sample)，可以是int、一维array-like。</p>
<p>其中一维array-like是指一维array、元组这样的结构。</p>
<p>如果是int，则样本为0到n-1。</p>
<p>如果是array-like，则随机出来的值从里面取。</p>
<p><strong>size</strong></p>
<p>从a中抽取几个，即返回值的shape。也可以是一个int，相当于就返回一个一维数组。</p>
<p>如果忽略，只返回一个。</p>
<p><strong>replacement</strong></p>
<p>代表的意思是抽样之后还放不放回去，如果是False的话，那么出来的三个数都不一样，如果是True的话， 有可能会出现重复的，因为前面的抽的放回去了。</p>
<p>replacement在这里的意思是复位（re-placement, 放回），而不是替换。</p>
<p><strong>p</strong></p>
<p>a中每个样本被抽中的概率，默认为等概率。</p>
<h3 id="astype"><a class="markdownIt-Anchor" href="#astype"></a> astype</h3>
<p>改变其dtype</p>
<p>常见用法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array([[<span class="number">-3</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]], dtype=np.float)</span><br><span class="line">array([[<span class="number">-3.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>],</span><br><span class="line">       [ <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.astype(np.uint8) <span class="comment"># the same as a.astype('uint8')</span></span><br><span class="line">array([[<span class="number">253</span>,   <span class="number">2</span>,   <span class="number">3</span>],</span><br><span class="line">       [  <span class="number">4</span>,   <span class="number">5</span>,   <span class="number">6</span>]], dtype=uint8)</span><br></pre></td></tr></table></figure>
<p>一般用法如plt.imshow(X_train[idx].astype(np.uint8))，在显示图片前将其转换到0-255</p>
<h3 id="reshape"><a class="markdownIt-Anchor" href="#reshape"></a> reshape</h3>
<p>将其reshape为新的shape</p>
<p>比方说</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure>
<p>限制：新的shape各维乘积必须等于原来shape各维乘积</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line">ValueError: cannot reshape array of size <span class="number">12</span> into shape (<span class="number">3</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p><strong>骚操作1：某维为-1</strong></p>
<p>由于这种特性，我们有一个骚操作：其中一个数字为-1，numpy就可以帮我们算好该维度该填几</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">-1</span>,<span class="number">2</span>)).shape</span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>当然，如果你使得最后一个算出来是个小数，显然也是不行的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">3</span>,<span class="number">-1</span>)).shape</span><br><span class="line">ValueError: cannot reshape array of size <span class="number">12</span> into shape (<span class="number">3</span>,<span class="number">3</span>,newaxis)</span><br></pre></td></tr></table></figure>
<p>而且只能有一维是-1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">-1</span>,<span class="number">-1</span>)).shape</span><br><span class="line">ValueError: can only specify one unknown dimension</span><br></pre></td></tr></table></figure>
<p><strong>骚操作2：flat化</strong></p>
<p>效果等同ravel</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.ones(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">-1</span>,<span class="number">2</span>))</span><br><span class="line">array([[[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>]],</span><br><span class="line">       [[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>]],</span><br><span class="line">       [[<span class="number">1.</span>, <span class="number">1.</span>],</span><br><span class="line">        [<span class="number">1.</span>, <span class="number">1.</span>]]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.reshape(<span class="number">-1</span>)</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.ravel()</span><br><span class="line">array([<span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>, <span class="number">1.</span>])</span><br></pre></td></tr></table></figure>
<p><strong>骚操作3：矩阵转置</strong></p>
<p>这个很简单，就不讲了。</p>
<p>提这个是为了让大家看到reshape可以玩的东西非常多。</p>
<h3 id="resize"><a class="markdownIt-Anchor" href="#resize"></a> resize</h3>
<p>resize和reshape相似，但resize可以扩大和缩小数组，无需满足reshape的乘积关系。</p>
<p>扩大数组时，新增的元素填补初始值，如0。</p>
<p>缩小数组时，多余的数组直接舍去。</p>
<p>resize会改变所引用的对象，且无返回值，但reshape返回一个新的对象。</p>
<h3 id="argsort"><a class="markdownIt-Anchor" href="#argsort"></a> argsort</h3>
<p>sort会返回排序好的ndarray</p>
<p>但argsort会返回一个数组的indices</p>
<p>即</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://www.geeksforgeeks.org/sort-sorteda-np-argsorta-np-lexsortb-python/</span></span><br><span class="line"><span class="comment"># Python code to demonstrate working of np.argsort </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"></span><br><span class="line"><span class="comment"># Numpy array created </span></span><br><span class="line">a = np.array([<span class="number">9</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">6</span>]) </span><br><span class="line"></span><br><span class="line"><span class="comment"># unsorted array print </span></span><br><span class="line">print(<span class="string">'Original array:\n'</span>, a) </span><br><span class="line"></span><br><span class="line"><span class="comment"># Sort array indices </span></span><br><span class="line">b = np.argsort(a) </span><br><span class="line">print(<span class="string">'Sorted indices of original array-&gt;'</span>, b) </span><br><span class="line"></span><br><span class="line"><span class="comment"># To get sorted array using sorted indices </span></span><br><span class="line"><span class="comment"># c is temp array created of same len as of b </span></span><br><span class="line">c = np.zeros(len(b), dtype = int) </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(b)): </span><br><span class="line">	c[i]= a[b[i]] </span><br><span class="line">print(<span class="string">'Sorted array-&gt;'</span>, c)</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OUTPUT:np.argsort(a)</span><br><span class="line">Original array:</span><br><span class="line"> [<span class="number">9</span> <span class="number">3</span> <span class="number">1</span> <span class="number">7</span> <span class="number">4</span> <span class="number">3</span> <span class="number">6</span>]</span><br><span class="line">Sorted indices of original array-&gt; [2 1 5 4 6 3 0]</span><br><span class="line">Sorted array-&gt; [1 3 3 4 6 7 9]</span><br></pre></td></tr></table></figure>
<h3 id="asarray"><a class="markdownIt-Anchor" href="#asarray"></a> asarray</h3>
<p>将类array转为ndarray</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.asarray([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.asarray(a)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h3 id="where"><a class="markdownIt-Anchor" href="#where"></a> where</h3>
<blockquote>
<p>numpy.where(<em>condition</em>[, <em>x</em>, <em>y</em>])</p>
<p>Return elements chosen from <em>x</em> or <em>y</em> depending on <em>condition</em>.</p>
</blockquote>
<p>condition、x、y是相同shape的类ndarray，其中x和y可以省略（注意，比较运算符的结果也是ndarray）。</p>
<p>当只有参数condition即x、y省略的时候，等价于<code>np.asarray(condition).nonzero()</code>。</p>
<p>如</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.array(tuple(range(<span class="number">9</span>))).reshape((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">       [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a&gt;<span class="number">5</span></span><br><span class="line">array([[<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(a&gt;<span class="number">5</span>)</span><br><span class="line">(array([<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]),</span><br><span class="line"> array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))</span><br></pre></td></tr></table></figure>
<p>当参数x、y不省略时，相当于c/c++中的三目运算符，condition中某对应元素为True时，对应元素为x中的对应元素，否则为y中的对应元素（注意，非0会转换为True，0转换为False）。</p>
<h3 id="log1p"><a class="markdownIt-Anchor" href="#log1p"></a> log1p</h3>
<p><code>log1p(x)</code>即<code>log(1+x)</code></p>
<blockquote>
<p>For real-valued input, <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.log1p.html#numpy.log1p" target="_blank" rel="noopener"><code>log1p</code></a> is accurate also for <em>x</em> so small that <em>1 + x == 1</em> in floating-point accuracy.</p>
</blockquote>
<p>log1p更精确。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; np.log1p(1e-99)</span><br><span class="line">1e-99</span><br><span class="line">&gt;&gt;&gt; np.log(1 + 1e-99)</span><br><span class="line">0.0</span><br></pre></td></tr></table></figure>
<h3 id="arange"><a class="markdownIt-Anchor" href="#arange"></a> arange</h3>
<p>参数含义同python中的range，返回一个1D-array，为<code>np.array(list(range(params)))</code>的缩写。</p>
<h3 id="logical_and"><a class="markdownIt-Anchor" href="#logical_and"></a> logical_and</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=np.arange(<span class="number">12</span>)</span><br><span class="line">array([ <span class="number">0</span>,  <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">5</span>,  <span class="number">6</span>,  <span class="number">7</span>,  <span class="number">8</span>,  <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=np.arange(<span class="number">11</span>,<span class="number">-1</span>,<span class="number">-1</span>)</span><br><span class="line">array([<span class="number">11</span>, <span class="number">10</span>,  <span class="number">9</span>,  <span class="number">8</span>,  <span class="number">7</span>,  <span class="number">6</span>,  <span class="number">5</span>,  <span class="number">4</span>,  <span class="number">3</span>,  <span class="number">2</span>,  <span class="number">1</span>, <span class="number">0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.logical_and(a&gt;<span class="number">3</span>,b&gt;<span class="number">3</span>)</span><br><span class="line">array([<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,</span><br><span class="line">       <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>])</span><br></pre></td></tr></table></figure>
<p>常常与where或flatnonzero连用：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.flatnonzero(np.logical_and(a&gt;<span class="number">3</span>,b&gt;<span class="number">3</span>))</span><br><span class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.where(np.logical_and(a&gt;<span class="number">3</span>,b&gt;<span class="number">3</span>))</span><br><span class="line">(array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]),)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.flatnonzero(np.logical_and(a&gt;<span class="number">3</span>,b&gt;<span class="number">3</span>))]</span><br><span class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[np.where(np.logical_and(a&gt;<span class="number">3</span>,b&gt;<span class="number">3</span>))]</span><br><span class="line">array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>])</span><br></pre></td></tr></table></figure>
<p>均可取到对应的值。</p>
<p>该函数可被&amp;代替：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(a&gt;<span class="number">3</span>)&amp;(b&gt;<span class="number">3</span>)</span><br><span class="line">array([<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>,</span><br><span class="line">       <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>])</span><br></pre></td></tr></table></figure>
<p>记得加括号。</p>
<h3 id="corrcoef"><a class="markdownIt-Anchor" href="#corrcoef"></a> corrcoef</h3>
<p>计算两组数据的协方差，常常用来标定两列数据的相关度。</p>
<blockquote>
<p>numpy.corrcoef(<em>x</em>, <em>y=None</em>**,** <em>rowvar=True</em>**,** <em>bias=<no value></no></em><strong>,</strong> <em>ddof=<no value></no></em>)</p>
<table>
<thead>
<tr>
<th style="text-align:left">Parameters:</th>
<th><strong>x</strong> : array_like<br>A 1-D or 2-D array containing multiple variables and observations. Each row of <em>x</em> represents a variable, and each column a single observation of all those variables. Also see <em>rowvar</em> below.<br><br><strong>y</strong> : array_like, optional<br>An additional set of variables and observations. <em>y</em> has the same shape as <em>x</em>.<br><br><strong>rowvar</strong> : bool, optional<br>If <em>rowvar</em> is True (default), then each row represents a variable, with observations in the columns. Otherwise, the relationship is transposed: each column represents a variable, while the rows contain observations.<br><br><strong>bias</strong> : _NoValue, optional<br>Has no effect, do not use.<em>Deprecated since version 1.10.0.</em><br><br><strong>ddof</strong> : _NoValue, optionalHas no effect, do not use.<em>Deprecated since version 1.10.0.</em></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Returns:</td>
<td><strong>R</strong> : ndarray<br>The correlation coefficient matrix of the variables.</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="percentile"><a class="markdownIt-Anchor" href="#percentile"></a> percentile</h3>
<p>输入1D-array A，百分比B%，返回给一个阈值C，使得集合<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>a</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi mathvariant="normal">∀</mi><mi>a</mi><mo>∈</mo><mi>A</mi><mo separator="true">,</mo><mtext> </mtext><mi>a</mi><mo>⩽</mo><mi>C</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{a~|~\forall a \in A,~a\leqslant C\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit">a</span><span class="mord mspace"> </span><span class="mord mathrm">∣</span><span class="mord mspace"> </span><span class="mord mathrm">∀</span><span class="mord mathit">a</span><span class="mrel">∈</span><span class="mord mathit">A</span><span class="mpunct">,</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mrel amsrm">⩽</span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mclose">}</span></span></span></span>的元素个数是集合A的B%。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.percentile([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],<span class="number">20</span>)</span><br><span class="line"><span class="number">2.8000000000000003</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.percentile([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],<span class="number">50</span>)</span><br><span class="line"><span class="number">5.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.percentile([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>],<span class="number">100</span>)</span><br><span class="line"><span class="number">10.0</span></span><br></pre></td></tr></table></figure>
<h2 id="常用方法"><a class="markdownIt-Anchor" href="#常用方法"></a> 常用方法</h2>
<h3 id="求众数"><a class="markdownIt-Anchor" href="#求众数"></a> <strong>求众数</strong></h3>
<p>在numpy中没有直接的方法，但是也可以这样实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#counts的index即该数，counts的值即该数出现的次数</span></span><br><span class="line">counts = np.bincount(nums)</span><br><span class="line"></span><br><span class="line"><span class="comment">#返回该众数</span></span><br><span class="line">index = np.argmax(counts)</span><br></pre></td></tr></table></figure>
<p>该方法在获取众数的时候会返回最小的众数。</p>
<p>下面方法会返回最靠前的众数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">nums=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="comment">#返回该众数</span></span><br><span class="line">Counter(nums).most_common(<span class="number">1</span>)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="comment">#返回该众数的次数</span></span><br><span class="line">Counter(nums).most_common(<span class="number">1</span>)[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line"><span class="comment">#返回两个众数</span></span><br><span class="line">Counter(nums).most_common(<span class="number">2</span>)</span><br><span class="line">Out: [(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">2</span>)]</span><br></pre></td></tr></table></figure>
<p>看一下Counter是什么：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Counter([<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line">Counter(&#123;<span class="number">3</span>: <span class="number">3</span>, <span class="number">2</span>: <span class="number">3</span>, <span class="number">1</span>: <span class="number">1</span>, <span class="number">4</span>: <span class="number">1</span>, <span class="number">5</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>可以看到，Counter会先按次数排，次数相同按出现顺序排，即Counter使用了一个顺序稳定的排序。</p>
<h1 id="python"><a class="markdownIt-Anchor" href="#python"></a> python</h1>
<h2 id="常见用法"><a class="markdownIt-Anchor" href="#常见用法"></a> 常见用法</h2>
<h3 id="listrangen"><a class="markdownIt-Anchor" href="#listrangen"></a> list(range(n))</h3>
<p>将range类型转换为list</p>
<p>如list(range(10))即相当于[x for x in range(10)]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(range(<span class="number">10</span>))</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br></pre></td></tr></table></figure>
<h3 id="listzip"><a class="markdownIt-Anchor" href="#listzip"></a> list(zip(…))</h3>
<p>和函数名字一样，它就是个拉链。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(zip([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])))</span><br><span class="line">[(<span class="number">1</span>,), (<span class="number">2</span>,), (<span class="number">3</span>,)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(zip([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])))</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(zip([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])))</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>), (<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>), (<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)]</span><br></pre></td></tr></table></figure>
<p>看到这里，是不是有点感觉了？</p>
<p>我们再配合<code>*</code>来让它表现更明显：</p>
<blockquote>
<p>注：<code>*</code>的作用是将列表展开</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(list(zip(*[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">                     [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],</span><br><span class="line">                     [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])))</span><br><span class="line">[(<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>),</span><br><span class="line"> (<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>),</span><br><span class="line"> (<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>)]</span><br></pre></td></tr></table></figure>
<p>它将一个二维列表转置了（上述输入输出经过了处理，使其更加形象）。</p>
<h3 id="dictzip"><a class="markdownIt-Anchor" href="#dictzip"></a> dict(zip([…],[…]))</h3>
<p>该方法常常用于将两个数组映射到一个dict。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict(zip([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]))</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">4</span>, <span class="number">2</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="number">6</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict(zip([<span class="number">1</span>,<span class="string">"appolo"</span>,<span class="number">3</span>],[<span class="string">"yeah"</span>,<span class="number">5</span>,<span class="literal">True</span>]))</span><br><span class="line">&#123;<span class="number">1</span>: <span class="string">'yeah'</span>, <span class="string">'appolo'</span>: <span class="number">5</span>, <span class="number">3</span>: <span class="literal">True</span>&#125;</span><br></pre></td></tr></table></figure>
<h1 id="matplotlibpyplot"><a class="markdownIt-Anchor" href="#matplotlibpyplot"></a> matplotlib.pyplot</h1>
<p>这应该是matlab的plot的python实现吧。</p>
<h2 id="函数与操作符-2"><a class="markdownIt-Anchor" href="#函数与操作符-2"></a> 函数与操作符</h2>
<p>下面只介绍简单常用用法。</p>
<h3 id="subplot"><a class="markdownIt-Anchor" href="#subplot"></a> subplot</h3>
<p><a href="https://morvanzhou.github.io/tutorials/data-manipulation/plt/4-1-subpot1/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/data-manipulation/plt/4-1-subpot1/</a></p>
<h1 id="pandas"><a class="markdownIt-Anchor" href="#pandas"></a> pandas</h1>
<h2 id="dataframe"><a class="markdownIt-Anchor" href="#dataframe"></a> DataFrame</h2>
<h3 id="drop"><a class="markdownIt-Anchor" href="#drop"></a> drop</h3>
<blockquote>
<p>DataFrame.drop(<em>self</em>, <em>labels=None</em>, <em>axis=0</em>, <em>index=None</em>, <em>columns=None</em>, <em>level=None</em>, <em>inplace=False</em>, <em>errors=‘raise’</em>)[<a href="http://github.com/pandas-dev/pandas/blob/v0.25.3/pandas/core/frame.py#L3978-L4118" target="_blank" rel="noopener">source]</a></p>
<p>Drop specified labels from rows or columns.</p>
<p>Remove rows or columns by specifying label names and corresponding axis, or by specifying directly index or column names. When using a multi-index, labels on different levels can be removed by specifying the level.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Parameters:</th>
<th><strong>labels</strong> : single label or list-likeIndex or column labels to drop.<br><br><strong>axis</strong> : {0 or ‘index’, 1 or ‘columns’}, default 0Whether to drop labels from the index (0 or ‘index’) or columns (1 or ‘columns’).<br><br><strong>index</strong> : single label or list-likeAlternative to specifying axis (<code>labels, axis=0</code> is equivalent to <code>index=labels</code>).*New in version 0.21.0.<br><br>*<strong>columns</strong> : single label or list-likeAlternative to specifying axis (<code>labels, axis=1</code> is equivalent to <code>columns=labels</code>).<em>New in version 0.21.0.</em><br><br><strong>level</strong> : int or level name, optionalFor MultiIndex, level from which the labels will be removed.<br><br><strong>inplace</strong> : bool, default FalseIf True, do operation inplace and return None.<br><br><strong>errors</strong> : {‘ignore’, ‘raise’}, default ‘raise’If ‘ignore’, suppress error and only existing labels are dropped.</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Returns:</td>
<td>DataFrameDataFrame without the removed index or column labels.</td>
</tr>
<tr>
<td style="text-align:left">Raises:</td>
<td>KeyErrorIf any of the labels is not found in the selected axis.</td>
</tr>
</tbody>
</table>
</blockquote>
<p><strong>drop one row</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.DataFrame(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)),index=[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>],columns=[<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>])</span><br><span class="line">	A	B	C	D</span><br><span class="line">a	<span class="number">12</span>	<span class="number">11</span>	<span class="number">10</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.drop(<span class="string">"a"</span>)</span><br><span class="line">	A	B	C	D</span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="comment"># the same as a.drop("a",axis="rows")</span></span><br><span class="line"><span class="comment"># the same as a.drop("a",axis=0)</span></span><br></pre></td></tr></table></figure>
<p><strong>drop one column</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.DataFrame(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)),index=[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>],columns=[<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>])</span><br><span class="line">	A	B	C	D</span><br><span class="line">a	<span class="number">12</span>	<span class="number">11</span>	<span class="number">10</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.drop(columns=<span class="string">"A"</span>)</span><br><span class="line">	B	C	D</span><br><span class="line">a	<span class="number">11</span>	<span class="number">10</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="comment"># the same as a.drop("A",axis="columns")</span></span><br><span class="line"><span class="comment"># the same as a.drop("A",axis=1)</span></span><br></pre></td></tr></table></figure>
<p>同时drop某行和某列是不被允许的。</p>
<p><strong>drop multi-rows / multi-columns</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.DataFrame(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)),index=[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>],columns=[<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>])</span><br><span class="line">	A	B	C	D</span><br><span class="line">a	<span class="number">12</span>	<span class="number">11</span>	<span class="number">10</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.drop(columns=[<span class="string">"A"</span>,<span class="string">"C"</span>])</span><br><span class="line">	B	D</span><br><span class="line">a	<span class="number">11</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">7</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">3</span>	<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><strong>inplace</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.DataFrame(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)),index=[<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>],columns=[<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>])</span><br><span class="line">	A	B	C	D</span><br><span class="line">a	<span class="number">12</span>	<span class="number">11</span>	<span class="number">10</span>	<span class="number">9</span></span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.drop(<span class="string">"a"</span>,inplace=<span class="literal">True</span>)</span><br><span class="line">(no output <span class="keyword">and</span> a has changed)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">	A	B	C	D</span><br><span class="line">b	<span class="number">8</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">5</span></span><br><span class="line">c	<span class="number">4</span>	<span class="number">3</span>	<span class="number">2</span>	<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="series"><a class="markdownIt-Anchor" href="#series"></a> Series</h2>
<p><a href="https://pandas.pydata.org/Pandas-docs/stable/reference/api/Pandas.Series.html#Pandas.Series" target="_blank" rel="noopener"><code>Series</code></a> 是带标签的一维数组，可存储整数、浮点数、字符串、Python 对象等类型的数据。轴标签统称为<strong>索引</strong>。调用 <code>pd.Series</code> 函数即可创建 Series：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = pd.Series(data, index=index)</span><br></pre></td></tr></table></figure>
<p>上述代码中，<code>data</code> 支持以下数据类型：</p>
<ul>
<li>Python 字典</li>
<li>多维数组</li>
<li>标量值（如，5）</li>
</ul>
<p><code>index</code> 是轴标签列表。</p>
<h3 id="loc-iloc"><a class="markdownIt-Anchor" href="#loc-iloc"></a> loc / iloc</h3>
<p>loc[x]取得索引index（key）为x的value</p>
<p>iloc[x]取得第x个value</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.Series(np.arange(<span class="number">12</span>,<span class="number">0</span>,<span class="number">-1</span>),index=range(<span class="number">1</span>,<span class="number">24</span>,<span class="number">2</span>))</span><br><span class="line"><span class="number">1</span>     <span class="number">12</span></span><br><span class="line"><span class="number">3</span>     <span class="number">11</span></span><br><span class="line"><span class="number">5</span>     <span class="number">10</span></span><br><span class="line"><span class="number">7</span>      <span class="number">9</span></span><br><span class="line"><span class="number">9</span>      <span class="number">8</span></span><br><span class="line"><span class="number">11</span>     <span class="number">7</span></span><br><span class="line"><span class="number">13</span>     <span class="number">6</span></span><br><span class="line"><span class="number">15</span>     <span class="number">5</span></span><br><span class="line"><span class="number">17</span>     <span class="number">4</span></span><br><span class="line"><span class="number">19</span>     <span class="number">3</span></span><br><span class="line"><span class="number">21</span>     <span class="number">2</span></span><br><span class="line"><span class="number">23</span>     <span class="number">1</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.loc[<span class="number">3</span>]</span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.iloc[<span class="number">3</span>]</span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<h3 id="value_counts"><a class="markdownIt-Anchor" href="#value_counts"></a> value_counts</h3>
<blockquote>
<p>def <strong>value_counts</strong>(self, normalize=False, sort=True, ascending=False,</p>
<p>​                     bins=None, dropna=True):</p>
<p>Parameters</p>
<p>----------</p>
<p><strong>normalize</strong> : boolean, default False</p>
<p>​    If True then the object returned will contain the relative frequencies of the unique values.</p>
<p><strong>sort</strong> : boolean, default True</p>
<p>​    Sort by values</p>
<p><strong>ascending</strong> : boolean, default False</p>
<p>​    Sort in ascending order</p>
<p><strong>bins</strong> : integer, optional</p>
<p>​    Rather than count values, group them into half-open bins, a convenience for pd.cut, only works with numeric data</p>
<p><strong>dropna</strong> : boolean, default True</p>
<p>​    Don’t include counts of NaN.</p>
</blockquote>
<p><strong>常规用法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=pd.Series([<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>]).value_counts()</span><br><span class="line"><span class="number">1</span>    <span class="number">4</span></span><br><span class="line"><span class="number">2</span>    <span class="number">3</span></span><br><span class="line"><span class="number">3</span>    <span class="number">2</span></span><br><span class="line"><span class="number">5</span>    <span class="number">1</span></span><br><span class="line">dtype: int64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(a)</span><br><span class="line">pandas.core.series.Series</span><br></pre></td></tr></table></figure>
<p><strong>normalize</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.Series([<span class="number">5</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>]).value_counts(normalize=<span class="literal">True</span>)</span><br><span class="line"><span class="number">1</span>    <span class="number">0.4</span></span><br><span class="line"><span class="number">2</span>    <span class="number">0.3</span></span><br><span class="line"><span class="number">3</span>    <span class="number">0.2</span></span><br><span class="line"><span class="number">5</span>    <span class="number">0.1</span></span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure>
<p>可以看到出现频率被归一化了。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/data-science/">data-science</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/data-science/">data-science</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://mzz.pub/2019/12/06/数据挖掘/numpy/" data-title="numpy手册 | mzz&#39;s blog" data-tsina class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev">
 <a href="/2019/12/13/数据挖掘/xgboost/" title="xgboost的推导过程及训练方法">
  <strong>上一篇：</strong><br>
  <span>
  xgboost的推导过程及训练方法</span>
</a>
</div>


<div class="next">
<a href="/2019/10/17/JustPlay/R7000_NODE_NPM/" title="NETGEAR R6700/R6900/R7000梅林路由器到底能不能装NODE.JS/NPM？">
 <strong>下一篇：</strong><br> 
 <span>NETGEAR R6700/R6900/R7000梅林路由器到底能不能装NODE.JS/NPM？
</span>
</a>
</div>

</nav>

	  

<!-- gitalk -->
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: "3352072f2ad84717407d",
    clientSecret: "8ea01d206f36234ab857d6d90f16b85a865e79e3",
    repo: "mzz2017.github.io",
    owner: "mzz2017",
    admin: ["mzz2017"],
    id: decodeURIComponent(location.pathname), // Ensure uniqueness and length less than 50
    distractionFreeMode: false, // Facebook-like distraction free mode
    title: document.title.split(" | ")[0]
  });

  gitalk.render("gitalk-container");
</script>
<style type="text/css" rel="stylesheet">
  #gitalk-container {
    padding: 10px 20px 50px;
  }
</style>
<!-- gitalk -->

</div>  
      <div class="openaside">
  <a class="navbutton" href="#" title="显示侧边栏"></a>
</div>

 
<div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
   <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#numpy"><span class="toc-number">1.</span> <span class="toc-text"> numpy</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数与操作符"><span class="toc-number">1.1.</span> <span class="toc-text"> 函数与操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#"><span class="toc-number">1.1.1.</span> <span class="toc-text"> ==、&gt;、&lt;、&gt;=、&lt;=</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-2"><span class="toc-number">1.1.2.</span> <span class="toc-text"> []</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-"><span class="toc-number">1.1.3.</span> <span class="toc-text"> -/+</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in"><span class="toc-number">1.1.4.</span> <span class="toc-text"> in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-3"><span class="toc-number">1.1.5.</span> <span class="toc-text"> @</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-4"><span class="toc-number">1.1.6.</span> <span class="toc-text"> &amp;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#repeat"><span class="toc-number">1.1.7.</span> <span class="toc-text"> repeat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ravel"><span class="toc-number">1.1.8.</span> <span class="toc-text"> ravel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nonzero"><span class="toc-number">1.1.9.</span> <span class="toc-text"> nonzero</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flatnonzero"><span class="toc-number">1.1.10.</span> <span class="toc-text"> flatnonzero</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#randomseed"><span class="toc-number">1.1.11.</span> <span class="toc-text"> random.seed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#randomchoice"><span class="toc-number">1.1.12.</span> <span class="toc-text"> random.choice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#astype"><span class="toc-number">1.1.13.</span> <span class="toc-text"> astype</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reshape"><span class="toc-number">1.1.14.</span> <span class="toc-text"> reshape</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resize"><span class="toc-number">1.1.15.</span> <span class="toc-text"> resize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#argsort"><span class="toc-number">1.1.16.</span> <span class="toc-text"> argsort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asarray"><span class="toc-number">1.1.17.</span> <span class="toc-text"> asarray</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where"><span class="toc-number">1.1.18.</span> <span class="toc-text"> where</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log1p"><span class="toc-number">1.1.19.</span> <span class="toc-text"> log1p</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arange"><span class="toc-number">1.1.20.</span> <span class="toc-text"> arange</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logical_and"><span class="toc-number">1.1.21.</span> <span class="toc-text"> logical_and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#corrcoef"><span class="toc-number">1.1.22.</span> <span class="toc-text"> corrcoef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#percentile"><span class="toc-number">1.1.23.</span> <span class="toc-text"> percentile</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用方法"><span class="toc-number">1.2.</span> <span class="toc-text"> 常用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#求众数"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 求众数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#python"><span class="toc-number">2.</span> <span class="toc-text"> python</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#常见用法"><span class="toc-number">2.1.</span> <span class="toc-text"> 常见用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#listrangen"><span class="toc-number">2.1.1.</span> <span class="toc-text"> list(range(n))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#listzip"><span class="toc-number">2.1.2.</span> <span class="toc-text"> list(zip(…))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dictzip"><span class="toc-number">2.1.3.</span> <span class="toc-text"> dict(zip([…],[…]))</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#matplotlibpyplot"><span class="toc-number">3.</span> <span class="toc-text"> matplotlib.pyplot</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#函数与操作符-2"><span class="toc-number">3.1.</span> <span class="toc-text"> 函数与操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#subplot"><span class="toc-number">3.1.1.</span> <span class="toc-text"> subplot</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pandas"><span class="toc-number">4.</span> <span class="toc-text"> pandas</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#dataframe"><span class="toc-number">4.1.</span> <span class="toc-text"> DataFrame</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#drop"><span class="toc-number">4.1.1.</span> <span class="toc-text"> drop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#series"><span class="toc-number">4.2.</span> <span class="toc-text"> Series</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#loc-iloc"><span class="toc-number">4.2.1.</span> <span class="toc-text"> loc / iloc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#value_counts"><span class="toc-number">4.2.2.</span> <span class="toc-text"> value_counts</span></a></li></ol></li></ol></li></ol> 
</div>

<div id="asidepart">
  <div class="closeaside">
    <a class="closebutton" href="#" title="隐藏侧边栏"></a>
  </div>
  <aside class="clearfix">
     
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
		  
			<li><a href="/categories/2017暑期集训/" title="2017暑期集训">2017暑期集训<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/Cloud/" title="Cloud">Cloud<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/JAVA/" title="JAVA">JAVA<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/VPN/" title="VPN">VPN<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/cpp/" title="cpp">cpp<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/data-science/" title="data-science">data-science<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/ios/" title="ios">ios<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linearAlgebra/" title="linearAlgebra">linearAlgebra<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nlp/" title="nlp">nlp<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/rsh/" title="rsh">rsh<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ssh/" title="ssh">ssh<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端/" title="前端">前端<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/博客搭建指南/" title="博客搭建指南">博客搭建指南<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/安全/" title="安全">安全<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/应试/" title="应试">应试<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/微信小程序/" title="微信小程序">微信小程序<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/算法/" title="算法">算法<sup>23</sup></a></li>
		  
		
		  
			<li><a href="/categories/路由器/" title="路由器">路由器<sup>2</sup></a></li>
		  
		
		  
		
		</ul>
</div>
  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/Cloud/" style="font-size: 15px;">Cloud</a> <a href="/tags/DP/" style="font-size: 15px;">DP</a> <a href="/tags/JAVA/" style="font-size: 15px;">JAVA</a> <a href="/tags/OAuth-网络-安全/" style="font-size: 10px;">OAuth 网络 安全</a> <a href="/tags/SG博弈/" style="font-size: 15px;">SG博弈</a> <a href="/tags/VPN/" style="font-size: 10px;">VPN</a> <a href="/tags/VPN-网络/" style="font-size: 10px;">VPN 网络</a> <a href="/tags/cpp/" style="font-size: 10px;">cpp</a> <a href="/tags/data-science/" style="font-size: 12.5px;">data-science</a> <a href="/tags/ios-jailbreak/" style="font-size: 10px;">ios jailbreak</a> <a href="/tags/nlp/" style="font-size: 10px;">nlp</a> <a href="/tags/rsh/" style="font-size: 10px;">rsh</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/tip/" style="font-size: 10px;">tip</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/单调队列/" style="font-size: 10px;">单调队列</a> <a href="/tags/博弈/" style="font-size: 15px;">博弈</a> <a href="/tags/图论/" style="font-size: 17.5px;">图论</a> <a href="/tags/夹逼思想/" style="font-size: 10px;">夹逼思想</a> <a href="/tags/巴什博弈/" style="font-size: 10px;">巴什博弈</a> <a href="/tags/强连通/" style="font-size: 10px;">强连通</a> <a href="/tags/微信小程序/" style="font-size: 10px;">微信小程序</a> <a href="/tags/拓扑排序/" style="font-size: 10px;">拓扑排序</a> <a href="/tags/排列组合/" style="font-size: 10px;">排列组合</a> <a href="/tags/排序/" style="font-size: 12.5px;">排序</a> <a href="/tags/数论/" style="font-size: 20px;">数论</a> <a href="/tags/最小生成树/" style="font-size: 12.5px;">最小生成树</a> <a href="/tags/最短路径/" style="font-size: 10px;">最短路径</a> <a href="/tags/树/" style="font-size: 12.5px;">树</a> <a href="/tags/笔记/" style="font-size: 10px;">笔记</a> <a href="/tags/笔记-线代/" style="font-size: 10px;">笔记 线代</a> <a href="/tags/组合数/" style="font-size: 10px;">组合数</a> <a href="/tags/置换群/" style="font-size: 10px;">置换群</a> <a href="/tags/计算几何/" style="font-size: 12.5px;">计算几何</a> <a href="/tags/计组/" style="font-size: 10px;">计组</a> <a href="/tags/贪心/" style="font-size: 10px;">贪心</a> <a href="/tags/路由器/" style="font-size: 12.5px;">路由器</a> <a href="/tags/面试/" style="font-size: 10px;">面试</a>
    </div>
  </div>
  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="mzz2017" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
</div>

 
  </aside>
</div>
<iframe id="neteasemusic" style="position: relative; float:left; margin:2em 0 0 3%" frameborder="no" border="0" marginwidth="0" marginheight="0" height="450px" width="297px" src="//music.163.com/outchain/player?type=0&id=452039124&auto=0&height=450"></iframe>
<style type="text/css" rel="stylesheet">
  .moveMain ~ #neteasemusic {
    display: none;
  }
</style>
    </div>
    <footer><div id="footer">
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> I am with little well content, And a little from thee sent <br>
			Is enough, with true intent. To be steadfast friend.</p>
	</section>
	 
	<div class="social-font">
		
		<a href="http://weibo.com/6251750072" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/mzz2017" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		
		
		<a href="mailto:m@mzz.pub" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo" style="color: #fff;">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman" style="color: #fff;">Jacman</a> © 2019 
		
		<a href="/about" target="_blank" title="莫之章" style="color: #fff">莫之章</a>
		
		
		</p>
		
		<script type="text/javascript">
		  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
		  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
		  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
		  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
		  
		  _st('install','KARTphmFVqNf53QQL7QN','2.0.0');
		</script>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div style="text-align:center; color:#fff;" class="theme-info">
博客全站共96.0k字 | 总访客数:<span id="busuanzi_value_site_uv"> 
</span></div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    $('#toc.toc-aside').css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(15,260-$(this).scrollTop()));
    o.css("right",30);
  });
  
        getSize();
        if (myWidth >= 1024) {
            c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
      c.click();
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(50,295-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>











<!-- Analytics Begin -->

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1263193610'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263193610%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>







<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

<!-- BAIDU_PUSH Begin -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- BAIDU_PUSH End -->

<!-- MathJax Begin -->
<!-- partial('mathjax') -->
<!-- MathJax End -->

<link rel="stylesheet" href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css">

<link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </body>
</html>
